generator client {
  provider = "prisma-client-js"
  
}

datasource db {
    provider = "postgresql"
    url = env("POSTGRES_PRISMA_URL") // uses connection pooling
    
}

model UserTest {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  role      String?
  password  String
  Medic Medic?
  Appointments Appointment[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?

}

model Medic {
  id        Int      @id @default(autoincrement())
  name      String
  userId    Int @unique
  user    UserTest @relation(fields: [userId], references: [id])
  speciality String
  Appointments Appointment[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?
}

model Appointment {
  id        Int      @id @default(autoincrement())
  start_date DateTime
  end_date DateTime
  start_hour String
  end_hour String
  id_medic  Int
  medic     Medic    @relation(fields: [id_medic], references: [id])
  id_patient   Int
  user      UserTest @relation(fields: [id_patient], references: [id])
  description String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?
}

model Forms {
  id        Int      @id @default(autoincrement())
  title     String
  questions Json
  answers   Answers[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?

}

model Answers {
  id        Int      @id @default(autoincrement())
  questions Json
  id_form   Int
  form      Forms    @relation(fields:[id_form], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  deletedAt DateTime?
}